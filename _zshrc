# vim:filetype=zsh

# fpath
fpath=($HOME/.zsh/zsh-completions/src(N-/) $fpath)
fpath=($HOME/.zsh/complention $fpath)

# options
setopt always_last_prompt
setopt append_history
setopt auto_cd
setopt auto_menu
setopt auto_param_keys
setopt auto_remove_slash
setopt brace_ccl
setopt complete_in_word
setopt correct
setopt correct_all
setopt extended_glob
setopt extended_history
setopt globdots
setopt hist_expire_dups_first
setopt hist_find_no_dups
setopt hist_ignore_all_dups
setopt hist_ignore_space
setopt hist_no_functions
setopt hist_no_store
setopt hist_reduce_blanks
setopt hist_save_nodups
setopt hist_verify
setopt inc_append_history
setopt list_types
setopt magic_equal_subst
setopt mark_dirs
setopt no_beep
setopt no_hist_beep
setopt no_list_beep
setopt print_eight_bit
setopt share_history

# autoloads
# U: 展開される関数の内部で alias の展開をしない
# z: zsh 形式で読み込む
autoload -Uz add-zsh-hook
autoload -Uz colors; colors
autoload -Uz colors; colors
autoload -Uz compinit; compinit -u
autoload -Uz compinit; compinit -u
autoload -Uz history-search-end
autoload -Uz modify-current-argument
autoload -Uz run-help
autoload -Uz run-help-git
autoload -Uz smart-insert-last-word
autoload -Uz vcs_info
autoload -Uz zcalc
autoload -Uz zmv

# styles
# 補完関数の表示を強化する
zstyle ':completion:*:default' menu select=2
zstyle ':completion:*' verbose yes
zstyle ':completion:*' completer _expand _complete _match _prefix _approximate _list _history
zstyle ':completion:*:messages' format '%F{YELLOW}%d'$DEFAULT
zstyle ':completion:*:warnings' format '%F{RED}No matches for:''%F{YELLOW} %d'$DEFAULT
zstyle ':completion:*:descriptions' format '%F{YELLOW}completing %B%d%b'$DEFAULT
zstyle ':completion:*:options' description 'yes'
zstyle ':completion:*:descriptions' format '%F{yellow}Completing %B%d%b%f'$DEFAULT
# マッチ種別を別々に表示
zstyle ':completion:*' group-name ''
# セパレータを設定する
zstyle ':completion:*' list-separator '-->'
zstyle ':completion:*:manuals' separate-sections true

# Emacs Keybind
bindkey -e

# Plugins
source ~/.zplug/zplug
zplug "b4b4r07/zplug"
zplug "nojhan/liquidprompt"
zplug "junegunn/fzf-bin", \
    as:command, \
    from:gh-r, \
    file:fzf, \
    of:"*linux*amd64*"

# Install plugins if there are plugins that have not been installed
zplug check || zplug install
# source plugins and add commands to $PATH
zplug load

# alias
alias mv='mv -i'
alias -g cp='cp -i'
alias -g grep='grep --color=auto --exclude-dir={.bzr,.cvs,.git,.hg,.svn}'
alias -g mkdir='mkdir -p'
alias -g vimconfig='vim ~/.vimrc'
alias -g zshconfig='vim ~/.zshrc'
alias -g L='| less'
alias -g G='| grep'
alias -g v='gvim'
alias -g vi='vim'
alias -g vim='nvim'
alias g='git'
alias -g B='`git branch -a | peco --prompt "GIT BRANCH>" | head -n 1 | sed -e "s/^\*\s*//g"`'
alias -g R='`git remote | peco --prompt "GIT REMOTE>" | head -n 1`'

# tmuxがインストールされていたら自動的に起動してアタッチする
if which tmux > /dev/null 2>&1 ; then
  if [ -z $TMUX ] ; then
    if [ -z `tmux ls` ] ; then
      tmux -2
    else
      tmux -2 attach
    fi
  fi
fi
